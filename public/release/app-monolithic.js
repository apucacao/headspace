(function(a,b,c){Headspace.views.LinkView=b.View.extend({tmpl:"#link-tmpl",tagName:"li",events:{"click .star":"toggle"},initialize:function(){this.tmpl=c.template(a(this.tmpl).html())},render:function(){return a(this.el).html(this.tmpl(this.model.toJSON())),this},toggle:function(a){return console.log("todo: un/star"),!1}}),Headspace.views.LinkListView=b.View.extend({el:"ul#links",initialize:function(){c.bindAll(this,"render","add"),this.collection.bind("reset",this.render),this.collection.bind("add",this.add)},render:function(){a(this.el).html(this.collection.map(function(a){return(new Headspace.views.LinkView({model:a})).render().el},this))},add:function(b){a(this.el).prepend((new Headspace.views.LinkView({model:b})).render().el)}}),Headspace.routers.Links=b.Router.extend({routes:{"":"index"},initialize:function(a){this.collection=a.collection},index:function(){this.view=new Headspace.views.LinkListView({collection:this.collection}),this.collection.trigger("reset")}}),Headspace.init=function(d){c.extend(Headspace.config,d);var e=new Headspace.collections.Links(d.links),f=new Headspace.collections.Links(d.starred_links);new Headspace.routers.Links({collection:e}),b.history.started||(b.history.start(),b.history.started=!0),a(".created").timeago(),a(".add").click(function(){return new Headspace.views.AddLinkView({collection:e}),!1})}})(jQuery,Backbone,_)