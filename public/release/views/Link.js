define(["underscore","backbone","models/StarredLinks","text!templates/Link.html"],function(a,b,c,d){var e=b.View.extend({tagName:"li",events:{"click .star":"toggle"},stateClass:"true",initialize:function(){a.bindAll(this,"render","toggle","update"),this.model.bind("change:starred",this.update),this.tmpl=a.template(d)},render:function(){return $(this.el).html(this.tmpl(this.model.toJSON())),$(".created",this.el).timeago(),this},toggle:function(a){var b=!this.model.get("starred");return this.model.set({starred:b}).save(),c[c.get(this.model.id)?"remove":"add"](this.model),!1},update:function(){$(".star",this.el)[this.model.get("starred")?"addClass":"removeClass"]("true")}});return e})