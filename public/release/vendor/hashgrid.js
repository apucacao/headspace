/**
 * @license Copyright 2011 Analog Coop Limited
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
typeof jQuery=="undefined"&&alert("Hashgrid: jQuery not loaded. Make sure it's linked to your pages.");var hashgrid=function(a){function b(a){if(l.modifierKey==null)return!0;var b=!0;switch(l.modifierKey){case"ctrl":b=a.ctrlKey?a.ctrlKey:!1;break;case"alt":b=a.altKey?a.altKey:!1;break;case"shift":b=a.shiftKey?a.shiftKey:!1}return b}function c(a){var b=!1,c=a.keyCode?a.keyCode:a.which;return c==13?b="enter":b=String.fromCharCode(c).toLowerCase(),b}function d(){h(l.cookiePrefix+l.id,(E?"1":"0")+","+y+","+m,1)}function e(){t.show(),x.css({width:t.width()}),x.children(".vert").each(function(){$(this).css("display","inline-block"),$(this).offset().top>0&&$(this).hide()})}function f(a){var f,g,h=a.target.tagName.toLowerCase();if(h=="input"||h=="textarea"||h=="select")return!0;g=b(a);if(!g)return!0;f=c(a);if(!f)return!0;switch(f){case l.showGridKey:w?E&&(t.hide(),w=!1,E=!1,d()):(e(),w=!0);break;case l.holdGridKey:w&&!E&&(E=!0,d());break;case l.foregroundKey:w&&(t.css("z-index")==A?(t.css("z-index",z),y="B"):(t.css("z-index",A),y="F"),d());break;case l.jumpGridsKey:w&&l.numberOfGrids>1&&(t.removeClass(l.classPrefix+m),m++,m>l.numberOfGrids&&(m=1),t.addClass(l.classPrefix+m),e(),/webkit/.test(navigator.userAgent.toLowerCase())&&k(),d())}return!0}function g(a){var d,e=b(a);return e?(d=c(a),d&&d==l.showGridKey&&!E&&(t.hide(),w=!1),!0):!0}function h(a,b,c){var d,e="";c&&(d=new Date,d.setTime(d.getTime()+c*24*60*60*1e3),e="; expires="+d.toGMTString()),document.cookie=a+"="+b+e+"; path=/"}function i(a){var b,c=document.cookie.split(";"),d=0,e=c.length,f=a+"=";for(;d<e;d++){b=c[d];while(b.charAt(0)==" ")b=b.substring(1,b.length);if(b.indexOf(f)==0)return b.substring(f.length,b.length)}return null}function j(a){h(a,"",-1)}function k(){var a=document.styleSheets[0];try{a.addRule(".xxxxxx","position: relative"),a.removeRule(a.rules.length-1)}catch(b){}}var l={id:"grid",modifierKey:null,showGridKey:"g",holdGridKey:"h",foregroundKey:"f",jumpGridsKey:"j",numberOfGrids:1,classPrefix:"grid-",cookiePrefix:"hashgrid"},m=1,n,o,p,q,r,s,t,u,v,w=!1,x,y="B",z=-1,A=9999,B,C,D,E=!1,F;if(typeof a=="object")for(C in a)l[C]=a[C];else typeof a=="string"&&(l.id=a);$("#"+l.id).length>0&&$("#"+l.id).remove(),v=$("<div></div>"),v.attr("id",l.id).css({display:"none","pointer-events":"none"}),$("body").prepend(v),t=$("#"+l.id),t.css("z-index")=="auto"&&t.css("z-index",z),B=parseFloat($(document).height()),t.height(B),t.append('<div id="'+l.id+'-horiz" class="horiz first-line">'),F=t.css("top"),t.css({top:"-999px",display:"block"}),q=$("#"+l.id+"-horiz"),r=q.outerHeight(),t.css({display:"none",top:F});if(r<=0)return!1;s=Math.floor(B/r),n="";for(p=s-1;p>=1;p--)n+='<div class="horiz"></div>';t.append(n),t.append($('<div class="vert-container"></div>')),x=t.children(".vert-container"),o=t.width(),x.css({width:o,position:"absolute",top:0}),x.append('<div class="vert first-line">&nbsp;</div>'),n="";for(p=0;p<30;p++)n+='<div class="vert">&nbsp;</div>';return x.append(n),x.children().height(B).css({display:"inline-block"}),u=i(l.cookiePrefix+l.id),typeof u=="string"?(D=u.split(","),D[2]=Number(D[2]),typeof D[2]=="number"&&!isNaN(D[2])&&(m=D[2].toFixed(0),t.addClass(l.classPrefix+m)),D[1]=="F"&&(y="F",t.css("z-index",A)),D[0]=="1"&&(w=!0,E=!0,e())):t.addClass(l.classPrefix+m),$(document).bind("keydown",f),$(document).bind("keyup",g),{}};$(document).ready(function(){var a=new hashgrid({numberOfGrids:2})})